<!DOCTYPE HTML>
<form action="/" method="post">
    Solecial ID:<br>
    <input type="text" name="solecial" id="ssn"><br>
    Candidate:<br>
    <input type="text" name="candidate" id="c">
    <input type="text" name="signature" hidden id="sig">
    <br><br>
    <input type="submit" value="Submit">
</form>
<!--<script type="text/javascript" src="bundle.js"></script>-->
<script type="text/javascript">
    let ssn = document.getElementById("ssn");
    let c = document.getElementById("c");
    let sig = document.getElementById("sig");

    ssn.onchange = update;
    c.onchange = update;

    function update() {
        sign()
    }

    window.onload = function () {

    };

    var signingxhttp = new XMLHttpRequest();
    signingxhttp.onreadystatechange = function () {
        // if (this.readyState === 200) {
            console.log(this.responseText);
            sig.value = this.responseText;
        // }
    };
    function sign() {
        signingxhttp.open("POST", "http://localhost:3002", true);
        signingxhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        signingxhttp.send("vote[solecial]=" + ssn.value + "&vote[candidate]=" + c.value);
    }
</script>